!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("echarts")):"function"==typeof define&&define.amd?define(["echarts"],t):"object"==typeof exports?exports["echarts-liquidfill"]=t(require("echarts")):e["echarts-liquidfill"]=t(e.echarts)}(self,(e=>(()=>{"use strict";var t={190:t=>{t.exports=e}},a={},r=function e(r){var n=a[r];if(void 0!==n)return n.exports;var i=a[r]={exports:{}};return t[r](i,i.exports,e),i.exports}(190);r.extendSeriesModel({type:"series.liquidFill",optionUpdated:function(){var e=this.option;e.gridSize=Math.max(Math.floor(e.gridSize),4)},getInitialData:function(e,t){var a=r.helper.createDimensions(e.data,{coordDimensions:["value"]}),n=new r.List(a,this);return n.initData(e.data),n},defaultOption:{color:["#294D99","#156ACF","#1598ED","#45BDFF"],center:["50%","50%"],radius:"50%",amplitude:"8%",waveLength:"80%",phase:"auto",period:"auto",direction:"right",shape:"circle",waveAnimation:!0,animationEasing:"linear",animationEasingUpdate:"linear",animationDuration:2e3,animationDurationUpdate:1e3,outline:{show:!0,borderDistance:8,itemStyle:{color:"none",borderColor:"#294D99",borderWidth:8,shadowBlur:20,shadowColor:"rgba(0, 0, 0, 0.25)"}},backgroundStyle:{color:"#E3F7FF"},itemStyle:{opacity:.95,shadowBlur:50,shadowColor:"rgba(0, 0, 0, 0.4)"},label:{show:!0,color:"#294D99",insideColor:"#fff",fontSize:50,fontWeight:"bold",align:"center",baseline:"middle",position:"inside"},emphasis:{itemStyle:{opacity:.8}}}});var n,i,o="12px sans-serif",l=function(e){var t={};if("undefined"==typeof JSON)return t;for(var a=0;a<95;a++){var r=String.fromCharCode(a+32),n=(e.charCodeAt(a)-20)/100;t[r]=n}return t}("007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N"),s={createCanvas:function(){return"undefined"!=typeof document&&document.createElement("canvas")},measureText:function(e,t){if(!n){var a=s.createCanvas();n=a&&a.getContext("2d")}if(n)return i!==t&&(i=n.font=t||o),n.measureText(e);e=e||"";var r=/((?:\d+)?\.?\d*)px/.exec(t=t||o),h=r&&+r[1]||12,u=0;if(t.indexOf("mono")>=0)u=h*e.length;else for(var c=0;c<e.length;c++){var p=l[e[c]];u+=null==p?h:p*h}return{width:u}},loadImage:function(e,t,a){var r=new Image;return r.onload=t,r.onerror=a,r.src=e,r}};f(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],(function(e,t){return e["[object "+t+"]"]=!0,e}),{}),f(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],(function(e,t){return e["[object "+t+"Array]"]=!0,e}),{});var h=Object.prototype.toString,u=Array.prototype,c=u.forEach,p=(u.filter,u.slice,u.map,function(){}.constructor),d=p?p.prototype:null;function f(e,t,a,r){if(e&&t){for(var n=0,i=e.length;n<i;n++)a=t.call(r,a,e[n],n,e);return a}}s.createCanvas,d&&"function"==typeof d.bind&&d.call.bind(d.bind);var g=function(){function e(){this.data={}}return e.prototype.delete=function(e){var t=this.has(e);return t&&delete this.data[e],t},e.prototype.has=function(e){return this.data.hasOwnProperty(e)},e.prototype.get=function(e){return this.data[e]},e.prototype.set=function(e,t){return this.data[e]=t,this},e.prototype.keys=function(){return function(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(a);return t}(this.data)},e.prototype.forEach=function(e){var t=this.data;for(var a in t)t.hasOwnProperty(a)&&e(t[a],a)},e}(),v="function"==typeof Map;!function(){function e(t){var a,r=(a=t,Array.isArray?Array.isArray(a):"[object Array]"===h.call(a));this.data=v?new Map:new g;var n=this;function i(e,t){r?n.set(e,t):n.set(t,e)}t instanceof e?t.each(i):t&&function(e,t,a){if(e&&t)if(e.forEach&&e.forEach===c)e.forEach(t,a);else if(e.length===+e.length)for(var r=0,n=e.length;r<n;r++)t.call(a,e[r],r,e);else for(var i in e)e.hasOwnProperty(i)&&t.call(a,e[i],i,e)}(t,i)}e.prototype.hasKey=function(e){return this.data.has(e)},e.prototype.get=function(e){return this.data.get(e)},e.prototype.set=function(e,t){return this.data.set(e,t),t},e.prototype.each=function(e,t){this.data.forEach((function(a,r){e.call(t,a,r)}))},e.prototype.keys=function(){var e=this.data.keys();return v?Array.from(e):e},e.prototype.removeKey=function(e){this.data.delete(e)}}(),Math.PI;const y=r.graphic.extendShape({type:"ec-liquid-fill",shape:{waveLength:0,radius:0,radiusY:0,cx:0,cy:0,waterLevel:0,amplitude:0,phase:0,inverse:!1},buildPath:function(e,t){null==t.radiusY&&(t.radiusY=t.radius);for(var a=Math.max(2*Math.ceil(2*t.radius/t.waveLength*4),8);t.phase<2*-Math.PI;)t.phase+=2*Math.PI;for(;t.phase>0;)t.phase-=2*Math.PI;var r=t.phase/Math.PI/2*t.waveLength,n=t.cx-t.radius+r-2*t.radius;e.moveTo(n,t.waterLevel);for(var i=0,o=0;o<a;++o){var l=o%4,s=m(o*t.waveLength/4,l,t.waveLength,t.amplitude);e.bezierCurveTo(s[0][0]+n,-s[0][1]+t.waterLevel,s[1][0]+n,-s[1][1]+t.waterLevel,s[2][0]+n,-s[2][1]+t.waterLevel),o===a-1&&(i=s[2][0])}t.inverse?(e.lineTo(i+n,t.cy-t.radiusY),e.lineTo(n,t.cy-t.radiusY),e.lineTo(n,t.waterLevel)):(e.lineTo(i+n,t.cy+t.radiusY),e.lineTo(n,t.cy+t.radiusY),e.lineTo(n,t.waterLevel)),e.closePath()}});function m(e,t,a,r){return 0===t?[[e+.5*a/Math.PI/2,r/2],[e+.5*a/Math.PI,r],[e+a/4,r]]:1===t?[[e+.5*a/Math.PI/2*(Math.PI-2),r],[e+.5*a/Math.PI/2*(Math.PI-1),r/2],[e+a/4,0]]:2===t?[[e+.5*a/Math.PI/2,-r/2],[e+.5*a/Math.PI,-r],[e+a/4,-r]]:[[e+.5*a/Math.PI/2*(Math.PI-2),-r],[e+.5*a/Math.PI/2*(Math.PI-1),-r/2],[e+a/4,0]]}var w=function(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%"}return"string"==typeof e?(a=e,a.replace(/^\s+|\s+$/g,"")).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):null==e?NaN:+e;var a};function L(e){return e&&0===e.indexOf("path://")}return r.extendChartView({type:"liquidFill",render:function(e,t,a){var n=this,i=this.group;i.removeAll();var o=e.getData(),l=o.getItemModel(0),s=l.get("center"),h=l.get("radius"),u=a.getWidth(),c=a.getHeight(),p=Math.min(u,c),d=0,f=0,g=e.get("outline.show");g&&(d=e.get("outline.borderDistance"),f=w(e.get("outline.itemStyle.borderWidth"),p));var v,m,x,b=w(s[0],u),P=w(s[1],c),I=!1,M=e.get("shape");"container"===M?(I=!0,m=[(v=[u/2,c/2])[0]-f/2,v[1]-f/2],x=[w(d,u),w(d,c)],h=[Math.max(m[0]-x[0],0),Math.max(m[1]-x[1],0)]):(m=(v=w(h,p)/2)-f/2,x=w(d,p),h=Math.max(m-x,0)),g&&(W().style.lineWidth=f,i.add(W()));var C=I?0:b-h,S=I?0:P-h,F=null;i.add(function(){var t=T(h);t.setStyle(e.getModel("backgroundStyle").getItemStyle()),t.style.fill=null,t.z2=5;var a=T(h);a.setStyle(e.getModel("backgroundStyle").getItemStyle()),a.style.stroke=null;var n=new r.graphic.Group;return n.add(t),n.add(a),n}());var E=this._data,A=[];function T(e,t){if(M){if(L(M)){var a=r.graphic.makePath(M.slice(7),{}),n=a.getBoundingRect(),i=n.width,o=n.height;i>o?(o*=2*e/i,i=2*e):(i*=2*e/o,o=2*e);var l=t?0:b-i/2,s=t?0:P-o/2;return a=r.graphic.makePath(M.slice(7),{},new r.graphic.BoundingRect(l,s,i,o)),t&&(a.x=-i/2,a.y=-o/2),a}if(I){var h=t?-e[0]:b-e[0],u=t?-e[1]:P-e[1];return r.helper.createSymbol("rect",h,u,2*e[0],2*e[1])}return h=t?-e:b-e,u=t?-e:P-e,"pin"===M?u+=e:"arrow"===M&&(u-=e),r.helper.createSymbol(M,h,u,2*e,2*e)}return new r.graphic.Circle({shape:{cx:t?0:b,cy:t?0:P,r:e}})}function W(){var t=T(v);return t.style.fill=null,t.setStyle(e.getModel("outline.itemStyle").getItemStyle()),t}function D(t,a,n){var i=I?h[0]:h,l=I?c/2:h,s=o.getItemModel(t),u=s.getModel("itemStyle"),p=s.get("phase"),d=w(s.get("amplitude"),2*l),f=w(s.get("waveLength"),2*i),g=l-o.get("value",t)*l*2;p=n?n.shape.phase:"auto"===p?t*Math.PI/4:p;var v=u.getItemStyle();if(!v.fill){var m=e.get("color"),L=t%m.length;v.fill=m[L]}var x=new y({shape:{waveLength:f,radius:i,radiusY:l,cx:2*i,cy:0,waterLevel:g,amplitude:d,phase:p,inverse:a},style:v,x:b,y:P});x.shape._waterLevel=g;var M=s.getModel("emphasis.itemStyle").getItemStyle();M.lineWidth=0,x.ensureState("emphasis").style=M,r.helper.enableHoverEmphasis(x);var C=T(h,!0);return C.setStyle({fill:"white"}),x.setClipPath(C),x}function O(e,t,a){var r=o.getItemModel(e),n=r.get("period"),i=r.get("direction"),l=o.get("value",e),s=r.get("phase");s=a?a.shape.phase:"auto"===s?e*Math.PI/4:s;var h,u;h="auto"===n?0===(u=o.count())?5e3:5e3*(.2+(u-e)/u*.8):"function"==typeof n?n(l,e):n;var c=0;"right"===i||null==i?c=Math.PI:"left"===i?c=-Math.PI:"none"===i?c=0:console.error("Illegal direction value for liquid fill."),"none"!==i&&r.get("waveAnimation")&&t.animate("shape",!0).when(0,{phase:s}).when(h/2,{phase:c+s}).when(h,{phase:2*c+s}).during((function(){F&&F.dirty(!0)})).start()}o.diff(E).add((function(t){var a=D(t,!1),n=a.shape.waterLevel;a.shape.waterLevel=I?c/2:h,r.graphic.initProps(a,{shape:{waterLevel:n}},e),a.z2=2,O(t,a,null),i.add(a),o.setItemGraphicEl(t,a),A.push(a)})).update((function(t,a){for(var l=E.getItemGraphicEl(a),s=D(t,!1,l),h={},u=["amplitude","cx","cy","phase","radius","radiusY","waterLevel","waveLength"],p=0;p<u.length;++p){var d=u[p];s.shape.hasOwnProperty(d)&&(h[d]=s.shape[d])}var f={},g=["fill","opacity","shadowBlur","shadowColor"];for(p=0;p<g.length;++p)d=g[p],s.style.hasOwnProperty(d)&&(f[d]=s.style[d]);I&&(h.radiusY=c/2),r.graphic.updateProps(l,{shape:h,x:s.x,y:s.y},e),e.isUniversalTransitionEnabled&&e.isUniversalTransitionEnabled()?r.graphic.updateProps(l,{style:f},e):l.useStyle(f);var v=l.getClipPath(),y=s.getClipPath();l.setClipPath(s.getClipPath()),l.shape.inverse=s.inverse,v&&y&&n._shape===M&&!L(M)&&r.graphic.updateProps(y,{shape:v.shape},e,{isFrom:!0}),O(t,l,l),i.add(l),o.setItemGraphicEl(t,l),A.push(l)})).remove((function(e){var t=E.getItemGraphicEl(e);i.remove(t)})).execute(),l.get("label.show")&&i.add(function(t){var a=l.getModel("label");var n,i,s,u={z2:10,shape:{x:C,y:S,width:2*(I?h[0]:h),height:2*(I?h[1]:h)},style:{fill:"transparent"},textConfig:{position:a.get("position")||"inside"},silent:!0},c={style:{text:(n=e.getFormattedLabel(0,"normal"),i=100*o.get("value",0),s=o.getName(0)||e.name,isNaN(i)||(s=i.toFixed(0)+"%"),null==n?s:n),textAlign:a.get("align"),textVerticalAlign:a.get("baseline")}};Object.assign(c.style,r.helper.createTextStyle(a));var p=new r.graphic.Rect(u),d=new r.graphic.Rect(u);d.disableLabelAnimation=!0,p.disableLabelAnimation=!0;var f=new r.graphic.Text(c),g=new r.graphic.Text(c);p.setTextContent(f),d.setTextContent(g);var v=a.get("insideColor");g.style.fill=v;var y=new r.graphic.Group;y.add(p),y.add(d);var m=T(h,!0);return(F=new r.graphic.CompoundPath({shape:{paths:t},x:b,y:P})).setClipPath(m),d.setClipPath(F),y}(A)),this._shape=M,this._data=o},dispose:function(){}}),{}})()));
//# sourceMappingURL=echarts-liquidfill.min.js.map